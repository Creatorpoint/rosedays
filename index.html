<script>
/* music wave bars */
const wave = document.getElementById('musicWave');
for (let i = 0; i < 4; i++) {
  const bar = document.createElement('div');
  bar.className = 'music-bar';
  wave.appendChild(bar);
}

function showWish() {
  const name = document.getElementById('gfName').value.trim();
  if (!name) {
    alert('Please enter a name â¤ï¸');
    return;
  }

  window.girlName = name;

  document.getElementById('nameCard').classList.add('hidden');
  document.getElementById('wishText').innerText = `Happy Rose Day, ${name}! ðŸŒ¹`;
  document.getElementById('wishCard').classList.remove('hidden');

  // âœ… MUSIC PLAY (SAFE WAY)
  const music = document.getElementById('bgMusic');
  music.muted = false;
  music.play().catch(() => {
    alert('Tap Music button ðŸŽµ');
  });

  // glow beat
  setInterval(() => {
    document.body.classList.add('glow');
    setTimeout(() => document.body.classList.remove('glow'), 300);
  }, 600);
}

function showQuiz() {
  document.getElementById('wishCard').classList.add('hidden');
  document.getElementById('quizCard').classList.remove('hidden');
}

function quizAnswer() {
  document.getElementById('quizCard').classList.add('hidden');
  document.getElementById('photoCard').classList.remove('hidden');
}

function showLove() {
  document.getElementById('loveBox').classList.remove('hidden');
  heartBlast();
  fireWorks();
}

function heartBlast() {
  for (let i = 0; i < 20; i++) {
    const heart = document.createElement('div');
    heart.innerText = 'â¤ï¸';
    heart.style.position = 'fixed';
    heart.style.left = '50%';
    heart.style.top = '50%';
    heart.style.fontSize = '24px';
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  }
}

function fireWorks() {
  for (let i = 0; i < 30; i++) {
    const p = document.createElement('div');
    p.innerText = 'âœ¨';
    p.style.position = 'fixed';
    p.style.left = '50%';
    p.style.top = '50%';
    p.style.setProperty('--x', (Math.random() * 400 - 200) + 'px');
    p.style.setProperty('--y', (Math.random() * 400 - 200) + 'px');
    p.style.animation = 'firework 1.5s ease-out forwards';
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 1500);
  }
  alert('I Love You ' + window.girlName + ' â¤ï¸');
}

function toggleMusic() {
  const music = document.getElementById('bgMusic');
  if (music.paused) {
    music.play();
  } else {
    music.pause();
  }
}

function shareWhatsApp() {
  const text = encodeURIComponent(
    `Happy Rose Day â¤ï¸ ${window.girlName}, you are my everything ðŸŒ¹`
  );
  window.open('https://wa.me/?text=' + text, '_blank');
}

function loadPhoto(event) {
  const img = document.getElementById('photoPreview');
  img.src = URL.createObjectURL(event.target.files[0]);
}

/* falling roses */
setInterval(() => {
  const rose = document.createElement('div');
  rose.className = 'rose';
  rose.innerText = 'ðŸŒ¹';
  rose.style.left = Math.random() * 100 + 'vw';
  rose.style.animationDuration = 3 + Math.random() * 5 + 's';
  document.body.appendChild(rose);
  setTimeout(() => rose.remove(), 8000);
}, 300);
</script>
